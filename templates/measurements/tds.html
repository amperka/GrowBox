{% extends "base.html" %}
{% block headerScript %}
    <script src="../static/js/node_modules/canvas-gauges/gauge.min.js"></script>
    <script src="../static/js/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../static/js/node_modules/chart.js/dist/Chart.js"></script>
    <script src="../static/js/update_page.js"></script>
{% endblock %}

{% block content %}
    <div style="text-align:center">
      <canvas class="canv"
        data-type="linear-gauge"
        data-width="500"
        data-height="150"
        data-title="Уровень солей"
        data-min-value="0"
        data-max-value="2000"
        data-major-ticks="[0,500,1000,1500,2000]"
        data-minor-ticks="5"
        data-stroke-ticks="true"
        data-ticks-width="15"
        data-ticks-width-minor="7.5"
        data-highlights='[ {"from": 0, "to": 0, "color": "rgba(0,0, 255, .3)"},
                      {"from": 0, "to": 2000, "color": "rgba(255, 0, 0, .3)"} ]'
        data-color-major-ticks="#ffe66a"
        data-color-minor-ticks="#ffe66a"
        data-color-title="#eee"
        data-color-units="#ccc"
        data-color-numbers="#eee"
        data-color-plate="#009a40"
        data-color-plate-end="#009a40"
        data-border-shadow-width="0"
        data-borders="false"
        data-border-radius="10"
        data-needle-type="arrow"
        data-needle-width="3"
        data-animation-duration="500"
        data-animation-rule="linear"
        data-color-needle="#222"
        data-color-needle-end=""
        data-color-bar-progress="#410000"
        data-color-bar="#f5f5f5"
        data-bar-stroke="0"
        data-bar-width="8"
        data-bar-begin-circle="false"
        data-value = 0
      >
      </canvas>
    </div>
    <canvas id="chartCanv" width="600" height="400" style="margin: 0 auto"></canvas> <!-- Chart-->
    <!-- <script src="../static/js/dynamic_chart.js"></script> -->
    <script>
	Chart.defaults.global.responsive = false;
    	var Data = {
        	labels : [],
        	datasets : [{
		label : "{{label}}",
        	fill : true,
        	backgroundColor: "rgba(75,192,192,0.4)",
        	borderColor: "rgba(75,192,192,1)",
        	borderCapStyle: 'butt',
        	borderDash: [],
       		borderDashOffset: 0.0,
        	borderJoinStyle: 'miter',
        	pointBorderColor: "rgba(75,192,192,1)",
        	pointBackgroundColor: "#fff",
        	pointBorderWidth: 1,
        	pointHoverRadius: 5,
        	pointHoverBackgroundColor: "rgba(75,192,192,1)",
        	pointHoverBorderColor: "rgba(220,220,220,1)",
        	pointHoverBorderWidth: 2,
        	pointRadius: 1,
        	pointHitRadius: 10,
        	data : [],
        	spanGaps: false
        	}]
    	};

    	var Canv = document.getElementById('chartCanv').getContext('2d');
    	var chart = new Chart(Canv, {
            	type: 'line',
            	data: Data
    	});
      	var url = "/tds_measure";
      	getReading(url);
    </script>
{% endblock %}
